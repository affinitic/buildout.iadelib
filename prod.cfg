[buildout]
extends = https://raw.githubusercontent.com/IMIO/buildout.pm/4.1.5/communes.cfg
allow-picked-versions = false
show-picked-versions = true
parts -=
  zeoserver
  instance-amqp
index = http://pypi.affinitic.be/affinitic/affinitic-imio/+simple/
auto-checkout =
  relstorage
versions = versions
sources = sources

[instance1]
zeo-client = false
rel-storage = ${relstorage:rel-storage}
eggs -=
  Products.PloneMeeting[amqp]
eggs +=
  pas.plugins.ldap
  python-memcached
  iadelib.tools
  ${relstorage:eggs}
zcml +=
  pas.plugins.ldap
  iadelib.tools
zcml-additional =
  <include package="plone.app.async" file="single_db_instance.zcml" />

[relstorage]
eggs =
    RelStorage[mysql]
    mysql-connector-python
    python-memcached
rel-storage =
    type mysql
    host $(RELSTORAGE_DB_HOST)
    user $(RELSTORAGE_DB_USER)
    passwd $(RELSTORAGE_DB_PASSWORD)
    db $(RELSTORAGE_DB_NAME)
    port $(RELSTORAGE_DB_PORT)
    keep-history false
    shared-blob-dir true
    blob-dir $(RELSTORAGE_DB_BLOB_DIR)
    blob-cache-size 512mb
    cache-local-mb 1
    cache-prefix $(RELSTORAGE_DB_NAME)
    cache-module-name memcache
    cache-servers $(RELSTORAGE_DB_MEMCACHED)

[sources]
relstorage = git https://github.com/affinitic/relstorage.git branch=drop-myisam-1.6.3

[instance-async]
zcml-additional =
  <include package="plone.app.async" file="single_db_worker.zcml" />

[zope-conf]
additional =
amqp =
zamqp =
solr-eggs =

[versions]
Automat = 0.7.0
PyYAML = 5.1.2
Twisted = 17.1.0
ZConfig = 3.1.0
attrs = 19.1.0
bda.cache = 1.3.0
constantly = 15.1.0
gnureadline = 8.0.0
iadelib.tools = 1.0a3
incremental = 17.5.0
mysql-connector-python = 8.0.19
mysqlclient = 1.4.6
node = 0.9.24
node.ext.ldap = 1.0b11
node.ext.ugm = 0.9.10
odict = 1.7.0
pas.plugins.ldap = 1.5.4
passlib = 1.7.2
perfmetrics = 3.0.0
plumber = 1.5
pyasn1 = 0.4.8
pyasn1-modules = 0.2.8
python-ldap = 3.2.0
python-memcached = 1.58
yafowil = 2.3.1
yafowil.plone = 3.0.0
yafowil.widget.array = 1.6
yafowil.widget.dict = 1.7
yafowil.yaml = 1.3
